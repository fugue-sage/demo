import Ludwig.NodeStream as NodeStream
import Fugue.AWS.ELB as ELB 

numberOfElbsAllowed: 1

fun checkELBtotal(ns: NodeStream) -> Validation:
        let List<NodeStream.Node<ELB.LoadBalancer>> allELBs: NodeStream.unsafeGetNodesByTag(ns, "Fugue.Core.AWS.ELB.LoadBalancer")
        if List.length(allELBs) > numberOfElbsAllowed then
            Validation.failure "You can only have one ELB per workload"
        else
            Validation.success
